### PHẦN 1: TÀI LIỆU KỸ THUẬT (SRS) CHO TICKET [BE-01]

#### **Ticket: [BE-01] Init Project & Database Connection**

**1. Thông tin chung**

* **Assignee:** Nguyễn Quý Đức (Fullstack Lead)
* **Branch Name:** `feature/BE-01-init-project`
* **Estimated Time:** 1h

**2. Mô tả (Description)**
Khởi tạo cấu trúc dự án Node.js/Express, cài đặt các thư viện nền tảng và thiết lập kết nối an toàn tới MongoDB Atlas. Thiết lập các cấu hình bảo mật và xử lý lỗi cơ bản.

**3. Yêu cầu kỹ thuật (Technical Specs)**

 **Runtime:** Node.js v18+

 **Package Manager:** pnpm (khuyến nghị) hoặc npm.

 **Core Dependencies:**

* `express`: Web framework.
* `mongoose`: ODM làm việc với MongoDB.
* `dotenv`: Quản lý biến môi trường.
* `cors`: Cho phép Cross-Origin Resource Sharing (để Frontend gọi được API).
* `helmet`: Bảo mật HTTP headers.
* `morgan` (Optional): Log HTTP request (dev mode).

 **Dev Dependencies:**

* `nodemon`: Tự động restart server khi code thay đổi.

**4. Cấu trúc thư mục khởi tạo**

```text
src/
├── config/
│   ├── db.config.ts       # Logic connect MongoDB
│   └── cors.config.ts     # Cấu hình CORS
├── middlewares/
│   ├── auth.middleware.ts  # Authentication & Authorization
│   └── error.middleware.ts  # Global Error Handler
├── models/         # Mongoose schemas
├── routes/         # API routes
├── controllers/    # Business logic
├── types/          # TypeScript type definitions
├── app.ts          # Setup Express app, middlewares
└── server.ts       # Entry point (Listen port)
.env                # Biến môi trường (Không commit)
.gitignore          # Ignore node_modules, .env
tsconfig.json       # TypeScript configuration

```

**5. Acceptance Criteria (Tiêu chí chấp nhận)**

* [x] **Server:** Ứng dụng chạy thành công, lắng nghe tại port `5000` (hoặc port trong `.env`).
* [x] **Database:** Console log hiển thị `MongoDB Connected: <host>` khi khởi chạy. Nếu kết nối thất bại, process phải exit(1).
* [x] **Environment:** File `.env` mẫu (`.env.example`) được tạo đầy đủ các biến cần thiết (`PORT`, `MONGO_URI`, `NODE_ENV`, `JWT_SECRET`, `JWT_EXPIRE`).
* [x] **CORS:** Cấu hình cho phép mọi origin (`*`) hoặc cụ thể domain frontend (localhost:3000).
* [x] **Error Handling:** Middleware xử lý lỗi chung được cài đặt. Khi truy cập route không tồn tại, trả về JSON lỗi chuẩn (404 Not Found).

* *Format lỗi:* `{ success: false, message: "...", stack: "..." (chỉ hiện khi dev) }`

* [x] **Git:** Mã nguồn được push lên branch `dev`.
* [x] **TypeScript:** Dự án sử dụng TypeScript với cấu trúc thư mục tương tự nhưng với extension `.ts`.
